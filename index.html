<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Familjeplanerare</title>
  <style>
    :root {
      --primary-color: #3f51b5;
      --secondary-color: #f1f1f1;
      --border-color: #ccc;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: #fff;
      color: #333;
    }

    header, nav {
      background: var(--primary-color);
      color: #fff;
      padding: 1em;
      text-align: center;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 1em;
      flex-wrap: wrap;
    }

    nav button {
      background: #fff;
      color: var(--primary-color);
      border: none;
      padding: 0.5em 1em;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }

    main {
      max-width: 720px;
      margin: auto;
      padding: 1em;
    }

    .planner-week {
      min-width: 300px;
      margin-bottom: 2em;
    }

    .session {
      background: var(--secondary-color);
      border: 1px solid var(--border-color);
      padding: 1em;
      margin-top: 1em;
      border-radius: 5px;
    }

    .calendar-table {
      width: 100%;
      border-collapse: collapse;
    }

    .calendar-table th, .calendar-table td {
      border: 1px solid var(--border-color);
      padding: 0.5em;
      text-align: center;
    }

    .progress-bar {
      height: 20px;
      background: var(--secondary-color);
      border-radius: 10px;
      overflow: hidden;
      margin-top: 0.5em;
    }

    .progress-bar-fill {
      height: 100%;
      background: var(--primary-color);
    }

    .back-to-top {
      position: fixed;
      bottom: 1em;
      right: 1em;
      padding: 0.5em 1em;
      background: var(--primary-color);
      color: #fff;
      font-weight: bold;
      border-radius: 50px;
      display: none;
      z-index: 999;
    }

    @media (max-width: 600px) {
      nav {
        flex-direction: column;
      }

      nav button {
        width: 100%;
        margin-bottom: 0.5em;
      }

      .calendar-table {
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      .calendar-table td,
      .calendar-table th {
        min-width: 100px;
      }

      .planner-week {
        min-width: 260px;
      }

      .session {
        padding: 0.5em;
      }

      textarea {
        width: 100%;
        font-size: 1em;
      }

      .progress {
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Familjens Planerare</h1>
  </header>

  <nav>
    <button onclick="showView('schedule')">Schema</button>
    <button onclick="showView('planner')">Planner</button>
    <button onclick="showView('progress')">Progress</button>
  </nav>

  <main>
    <div id="scheduleView"></div>
    <div id="plannerView" style="display:none;"></div>
    <div id="progressView" style="display:none;"></div>
  </main>

  <button class="back-to-top" onclick="window.scrollTo({ top: 0, behavior: 'smooth' });">⬆️ Till toppen</button>

  <script>
    const people = ["Moa", "Elias"];
    const weeks = Array.from({ length: 8 }, (_, i) => i + 1);
    const recurring = [
      { day: "Måndag", activity: "Ridning - Moa" },
      { day: "Onsdag", activity: "Piano - Elias" },
      { day: "Fredag", activity: "Simning - Moa & Elias" }
    ];

    const state = {
      completed: {},
      notes: {}
    };

    function renderSchedule() {
      const el = document.getElementById("scheduleView");
      el.innerHTML = `
        <h2>Återkommande Aktiviteter</h2>
        <ul>${recurring.map(a => `<li><strong>${a.day}</strong>: ${a.activity}</li>`).join("")}</ul>
      `;
    }

    function renderPlanner() {
      const el = document.getElementById("plannerView");
      el.innerHTML = `<h2>Träningsplan</h2>` + people.map(person => {
        return `<section class="planner-week">
          <h3>${person}</h3>
          ${weeks.map(week => {
            const id = `${person}-w${week}`;
            const checked = state.completed[id] ? "checked" : "";
            const note = state.notes[id] || "";
            return `
              <div class="session">
                <label>
                  <input type="checkbox" onchange="toggleComplete('${id}')" ${checked}/> Vecka ${week}
                </label><br/>
                <textarea placeholder="Anteckningar..." oninput="saveNote('${id}', this.value)">${note}</textarea>
              </div>`;
          }).join("")}
        </section>`;
      }).join("");
    }

    function renderProgress() {
      const el = document.getElementById("progressView");
      el.innerHTML = `<h2>Framsteg</h2>` + people.map(person => {
        const total = weeks.length;
        const done = weeks.filter(week => state.completed[`${person}-w${week}`]).length;
        const percent = (done / total) * 100;
        return `
          <div class="progress-week">
            <h3>${person}: ${done}/${total}</h3>
            <div class="progress-bar">
              <div class="progress-bar-fill" style="width:${percent}%"></div>
            </div>
          </div>
        `;
      }).join("");
    }

    function toggleComplete(id) {
      state.completed[id] = !state.completed[id];
      renderProgress(); // update progress
    }

    function saveNote(id, value) {
      state.notes[id] = value;
    }

    function showView(view) {
      ["schedule", "planner", "progress"].forEach(v => {
        document.getElementById(v + "View").style.display = v === view ? "block" : "none";
      });
    }

    window.addEventListener("scroll", () => {
      const btn = document.querySelector(".back-to-top");
      btn.style.display = window.scrollY > 300 ? "block" : "none";
    });

    // Startvy
    renderSchedule();
    renderPlanner();
    renderProgress();
    showView("schedule");
  </script>
</body>
</html>
